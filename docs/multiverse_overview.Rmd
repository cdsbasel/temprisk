---
title: "Multiverse Analysis Overview"
output: 
  html_document:
    toc: yes
    toc_float: yes
---

<!-- <style type="text/css"> -->
<!-- .main-container { -->
<!-- max-width: 1200px !important; -->
<!-- margin-left: auto; -->
<!-- margin-right: auto; -->
<!-- } -->
<!-- </style> -->


<!-- <style type="text/css"> -->
<!--   body{ -->
<!--   font-size: 12pt; -->
<!--   font-family: "Source Sans 3"; -->
<!-- } -->
<!-- </style> -->




```{r, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)

# options(width = 3000)

library(tidyverse)
library(kableExtra)
library(knitr)
library(ggdist)
library(brms)
library(patchwork)
library(posterior)
library(bayesplot)
library(ggplot2)
library(rstanarm)
library(data.table)
library(boot)
library(DT)
library(GGally)
library(MetBrewer)

color_scheme_set("teal")

```



## Brief Description


Below we provide an overview of how robust the results reported in the main paper are to different data processing and analysis decisions. To do so, we conducted the same (main) analyses using data sets derived from other combinations of data processing and model specification decisions (see diagram below). ***Refer to the [Workflow](https://cdsbasel.github.io/temprisk/workflow_overview.html) page for more information on how these analyses were conducted*** 

The plots in the different sections and tabs show in the upper panel the parameter estimate as a function of different data configurations and analysis decisions which are indicated in the lower panel (dashes indicate which option was used to process/analyse the data). The middle panel shows the number of effect sizes/correlations that were included in the analyses.

The plots have a similar format as those used for Specification Curve Analysis (Hall et al., 2022; Simonsohn, Simmons, & Nelson, 2020)


<br>

```{r, out.width="100%", fig.cap="Overview of data processing and analysis options. Options in bold represent the results reported in the main paper."}
knitr::include_graphics("images/multiverse_overview.png")
```


<br>

**References**

Hall, B.D., Liu, Y., Jansen, Y., Dragicevic, P., Chevalier, F. and Kay, M. (2022), A Survey of Tasks and Visualizations in Multiverse Analysis Reports. Computer Graphics Forum, 41: 402-426. doi: 10.1111/cgf.14443


 Simonsohn, U., Simmons, J. P., & Nelson, L. D. (2020). Specification curve analysis. *Nature Human Behaviour, 4*(11), 1208-1214. doi: 10.1038/s41562-020-0912-z


<br>

## Size of datasets {.tabset}

Based on the threshold used for the sample size (i.e., minimum of 30, 100 or 250 responses to compute the correlation) the size of the dataset varies. Below is an overview of the number of correlation coefficients for each age group for different thresholds of minimum sample size.

### Test-Retest Correlations {.tabset}
#### Non-Aggregated Correlations
```{r, out.width="100%"}
knitr::include_graphics("images/threshold_retest_plot.png")
```

<br>


#### Aggregated Correlations
```{r, out.width="100%"}
knitr::include_graphics("images/threshold_retest_agg_plot.png")
```

<br>

### Inter-Correlations {.tabset}
#### Non-Aggregated Correlations
```{r, out.width="100%"}
knitr::include_graphics("images/threshold_intercor_plot.png")
```

<br>


#### Aggregated Correlations
```{r, out.width="100%"}
knitr::include_graphics("images/threshold_intercor_agg_plot.png")
```

<br>

<br><br>

## Temporal Stability

### Variance Decomposition  {.tabset}

We could not estimate Shapley values for certain datasets given that certain data points would be removed from the dataset, and we would therefore encounter either issues related to singularities or lack of levels in a categorical variable. As a result, the number of possible dataset configurations vary between measure categories.

#### Omnibus

```{r, out.width="100%"}
knitr::include_graphics("images/shapley_omni_multiverse.png")
```

<br><br><br>

#### Propensity

```{r, out.width="100%"}
knitr::include_graphics("images/shapley_pro_multiverse.png")
```

<br><br><br>

#### Frequency

```{r, out.width="100%"}
knitr::include_graphics("images/shapley_fre_multiverse.png")
```

<br><br><br>


#### Behaviour

```{r, out.width="100%"}
knitr::include_graphics("images/shapley_beh_multiverse.png")
```

<br><br><br>

### Meta-Analytic Stability and Change model  {.tabset}

**UNDER CONSTRUCTION**



<br><br>


## Convergent Validity

### Variance Decomposition

We could not estimate Shapley values for certain datasets given that certain data points would be removed from the dataset, and we would therefore encounter either issues related to singularities or lack of levels in a categorical variable. 



```{r, out.width="100%"}
knitr::include_graphics("images/shapley_intercor_multiverse.png")
```

<br><br><br>


### Meta-Analysis {.tabset}

#### Overall
```{r, out.width="100%"}
knitr::include_graphics("images/convergent_ma_overall_multiverse.png")
```

<br>

#### By Measure Pairs

**UNDER CONSTRUCTION**

<br>
